<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type"text/css" href="./visuals/styles/styles.css">
    <title>Glory Knows No Limit</title>
    <script type = "text/javascript" src="./scripts/sessvars.js"></script>
    <script type = "text/javascript" src="./scripts/CustomHexMapCode.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
        function startFunction() {
            document.getElementById('backLink').href = sessvars.systemLink.toString();
            var widthPixel = document.getElementById('hexmapContainer').offsetWidth;
            var heightPixel = document.getElementById('hexmapContainer').offsetHeight;
            document.getElementById('hexDrawingCanvas').setAttribute('width', widthPixel);
            document.getElementById('hexDrawingCanvas').setAttribute('height', heightPixel);
            //document.getElementById('diagBox').innerHTML = sessvars.systemLink.toString() + "<br>" + sessvars.systemID.toString() + "<br>" + sessvars.planetID.toString();

            var xhttp = new XMLHttpRequest();
            var parser = new DOMParser();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var xmlDoc = parser.parseFromString(this.responseText, "application/xml");
                    console.log(xmlDoc);
                    if (!(xmlDoc.getElementsByTagName('root')[0].innerHTML == "Gas Giant")) {
                        console.log(xmlDoc.getElementsByTagName('root')[0].childNodes[0].getAttribute('name'));
                        hexMapBuild(xmlDoc.getElementsByTagName('root')[0].childNodes.length, 2.25);
                        document.getElementById('pageHead').innerHTML = xmlDoc.getElementsByTagName('root')[0].childNodes[0].getAttribute('name');
                        
                    } else {
                        
                    }
                }
            };
            //as many /0's can be added to the request url as you need. They each represent different pieces of data being sent to the server from the site. They can be any alphanumeric character
            xhttp.open("GET", "/ServerBuilder.js/planet/"+sessvars.systemID+"/"+sessvars.planetID+"?pageid=" + (new Date()).getTime(), true);
            xhttp.send();
        }
    </script>
</head>
<body onload="startFunction();" id="body">

    <header class="pageHeader">
        <div class="flex-container">
            <div class="flex-title">
                <h1 id="pageHead" class="pageTitle"></h1>
            </div>
        </div>
        <div id="diagBox" style="position: fixed; top: 0; right: 0; width: 10%; background-color: gray; color: white; font-size: 12 pt; z-index: 10;">
            <p id="diagText">test</p>
        </div>
    </header>

    <nav>
    <ul class="navList">
        <li class="navItem">
            <h2><a class="navLink" href="">User</a></h2>
        </li>
        <li class="navItem">
            <h2><a class="navLink" href="">Faction</a></h2>
        </li>
        <li class="navItem">
            <h2><a class="navLink" href="HomePage.html">Sector Map</a></h2>
        </li>
        <li class="navItem">
            <h2><a class="navLink" href="Login.html">Login</a></h2>
        </li>
        <li class="navItem">
            <h2><a class="navLink" href="">Logout</a></h2>
        </li>
        <li>
            <h2><a id="backLink" class="navLink" href="">Back to System</a></h2>
        </li>
    </ul>
    </nav>

    <content>
    <img src="./visuals/images/Background_Plate.png" alt="TileBackground" id="tileBackground">
    <div class="flexTileMap">
        <div id="infoBar" style="font-size: 0.85vw;">
            <div style="position: sticky; top: 0.5vw; padding-bottom: 1vw;">
                <div class="tileStats">
                    <h3 style="text-decoration: underline;">Tile <span id="infoBarTitleMutable">test</span>:</h3>
                    <p class="tileDataDisplay"><u>Controlling Faction:</u> <span class="tileDataDisplayMutable">test</span></p>
                    <p class="tileDataDisplay"><u>Fotifications:</u> <span class="tileDataDisplayMutable">test</span></p>
                    <p class="tileDataDisplay"><u>Buildings:</u> <span class="tileDataDisplayMutable">test</span></p>
                </div>
                <div style="border-top-style: solid; position: relative;">
                    <h3 style="text-decoration: underline;">Planet Name Buildings:</h3>
                    <div class="factionlist">
                        <h3>Faction:</h3>
                        <div class="factionlist-content">
                            <ul>
                                <li class="factionlist-list-item"><span class="factionBuildingLink" onclick="">Orks</span></li>
                                <li class="factionlist-list-item"><span class="factionBuildingLink" onclick="">Tyranids</span></li>
                                <li class="factionlist-list-item"><span class="factionBuildingLink" onclick="">Chaos</span></li>
                                <li class="factionlist-list-item"><span class="factionBuildingLink" onclick="">Imperium Indomitus</span></li>
                            </ul>
                        </div>
                    </div>
                    <table>
                        <tr id="barracks">
                            <td class="buildingDisplay"><u>Barracks:</u></td>
                            <td class="buildingDisplayMutable">test</td>
                        </tr>
                        <tr id="intHub">
                            <td class="buildingDisplay"><u>Intelligence Hub:</u></td>
                            <td class="buildingDisplayMutable">test</td>
                        </tr>
                        <tr id="outpost">
                            <td class="buildingDisplay"><u>Outpost:</u></td>
                            <td class="buildingDisplayMutable">test</td>
                        </tr>
                        <tr id="manufactorum">
                            <td class="buildingDisplay"><u>Manufactorum:</u></td>
                            <td class="buildingDisplayMutable">test</td>
                        </tr>
                        <tr id="trenches">
                            <td class="buildingDisplay"><u>Trench Network:</u></td>
                            <td class="buildingDisplayMutable">test</td>
                        </tr>
                        <tr id="airfield">
                            <td class="buildingDisplay"><u>Airfield:</u></td>
                            <td class="buildingDisplayMutable">test</td>
                        </tr>
                        <tr id="spaceport">
                            <td class="buildingDisplay"><u>Spaceport:</u></td>
                            <td class="buildingDisplayMutable">test</td>
                        </tr>
                        <tr id="lodgings">
                            <td class="buildingDisplay"><u>Personal Lodgings:</u></td>
                            <td class="buildingDisplayMutable">test</td>
                        </tr>
                        <tr id="monument">
                            <td class="buildingDisplay"><u>Monument:</u></td>
                            <td class="buildingDisplayMutable">test</td>
                        </tr>
                        <tr id="commRelay">
                            <td class="buildingDisplay"><u>Communications Relay:</u></td>
                            <td class="buildingDisplayMutable">test</td>
                        </tr>
                        <tr id="mine">
                            <td class="buildingDisplay"><u>Mines:</u></td>
                            <td class="buildingDisplayMutable">test</td>
                        </tr>
                        <tr id="generator">
                            <td class="buildingDisplay"><u>Exotic Generator:</u></td>
                            <td class="buildingDisplayMutable">test</td>
                        </tr>
                        <tr id="none">
                            <td colspan="2" class="buildingDisplay"><u>None</u></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div id="tileMap">
            <img src="./visuals/images/Background_Plate.png" alt="TileBackground" style="object-fit: contain; width: 100%; visibility: hidden;">

            <div id="hexmapContainer"><!-- Overlayed tile hex map -->
                <canvas id="hexDrawingCanvas" onmousemove="mousemoveFunction(event)"></canvas>
            </div>
        </div>
    </div>
    <div id="loreBar">
        <h3>Lore:</h3>
    </div>
    </content>

    <footer>
    </footer>


</body>
</html>